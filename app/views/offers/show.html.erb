<div class="container">
  <div id="carouselExampleControls" class="carousel slide rounded" data-ride="carousel">
      <div class="box position-relative">

        </div>

        <div class="carousel-inner">
          <% @offer.bar.photos.each_with_index do |photo, index| %>
            <div class="carousel-item <%#= "active" if index == 0 %>">
              <!-- <img src="..." class="d-block w-100" alt="Flat photo"> -->
              <% if @offer.end_time > DateTime.now  %>
                  <% if @offer.end_time > DateTime.now &&  DateTime.now > @offer.start_time %>
                    <p class="badge-offer badge-offer-show end-time-index countdown"  data-end-time="<%= @offer.end_time %>"></p>
                  <% else @offer.start_time > DateTime.now  %>
                    <p class="badge-offer badge-offer-show end-time-index"> <strong> Offer did not start yet. </strong></p>
                  <% end %>
              <% else %>
                <p class="badge-expired badge-offer-show end-time-index"> <strong> Offer expired. </strong></p>
              <% end %>
              <%= cl_image_tag photo.key,  crop: :fill, class: "d-block w-100 rounded gradient" %>
            </div>

          <% end %>


          <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
      </div>

  <div class="header-show">
    <h3 id="h1-show" class="px-2"><%= @offer.bar.name %></h3>
    <div class="info-show d-flex justify-content-between px-2">
      <div class="twothird">
        <p class="offer-show"><i class="fas fa-tag"></i><%= @offer.description %></p>
      </div>
      <div class="onethird">
        <p><i class="fas fa-city fa-purple"></i><%= @offer.bar.location %></p>
      </div>
  </div>

  <div>
      <h2></h2>
      <h2 id= title><%#= @offer.bar.name %></h2>
      <%= link_to "Claim", "/offers/#{@offer.id}/bookings", method: :post, class: "btn button-book" %>
      <p>Offer expires in:</p>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <% if @offer.end_time > DateTime.now &&  DateTime.now > @offer.start_time %>
        <div id="progressBar">
          <div></div>
        </div>
      <% elsif @offer.start_time > DateTime.now  %>
        <p class="border text-center"> <strong> Offer did not start yet. </strong></p>
      <% else %>
        <p class="border text-center"> <strong> Offer expired. </strong></p>
      <% end %>

    <div class="button-offer-container">
      <%= link_to 'Delete', offer_path(@offer), method: :delete, class: "btn button-offer" if current_user == @offer.bar.user  %>
      <%= link_to "Edit your offer", edit_offer_path(@offer), class: "btn button-offer" if current_user == @offer.bar.user %>
    </div>



  <div id="map"
       style="width: 100%; height: 300px;"
       data-markers="<%= @markers.to_json %>"
       data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
   </div>
   <br>
  <div class="button-offer-container">
  </div>
</div>
</div>
